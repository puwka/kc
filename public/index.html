<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRM –ö–æ–ª–ª-—Ü–µ–Ω—Ç—Ä–∞</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="app">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="navbar">
            <div class="nav-container">
                <h1 class="nav-title">CRM –ö–æ–ª–ª-—Ü–µ–Ω—Ç—Ä–∞</h1>
                <div class="nav-user" id="navUser" style="display: none;">
                    <a href="/profile.html" id="userName" class="user-name-link"></a>
                    <span id="userRole" class="user-role"></span>
                    <a href="/quality.html" id="qualityLink" class="btn btn-outline" style="display:none;">–û—Ç–¥–µ–ª –∫–∞—á–µ—Å—Ç–≤–∞</a>
                    <a href="/admin.html" id="adminLink" class="btn btn-outline" style="display: none;">–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</a>
                    <a href="/scripts.html" id="scriptsLink" class="btn btn-outline" style="display: none;">–°–∫—Ä–∏–ø—Ç—ã</a>
                    <button id="logoutBtn" class="btn btn-secondary">–í—ã–π—Ç–∏</button>
                </div>
            </div>
        </nav>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="main-content">
            <!-- –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞ -->
            <div id="authPage" class="page">
                <div class="auth-container">
                    <div class="redirect-message">
                        <h2>–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ...</h2>
                        <p>–í—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞</p>
                    </div>
                </div>
            </div>

            <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
            <div id="dashboardPage" class="page" style="display: none;">
                <div class="dashboard-container">
                    <!-- –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ª–æ–∞–¥–µ—Ä -->
                    <div id="loaderOverlay" class="loader-overlay" style="display: none;">
                        <div class="loader-spinner"></div>
                        <div class="loader-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    </div>
                    <!-- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ -->
                    <div class="analytics-section">
                        <div class="section-header">
                            <h2>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h2>
                            <button id="callBtn" class="btn btn-success" style="display: none;">üìû –ó–≤–æ–Ω–∏—Ç—å</button>
                        </div>
                        <div class="stats-grid" id="statsGrid">
                            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>

                    <!-- –í–æ—Ä–æ–Ω–∫–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä–æ–≤ –∏ –∞–¥–º–∏–Ω–æ–≤) -->
                    <div class="funnel-section" id="funnelSection" style="display: none;">
                        <h2>–í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂</h2>
                        <div class="funnel-chart" id="funnelChart">
                            <!-- –í–æ—Ä–æ–Ω–∫–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>

                    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏–¥–∞–º–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä–æ–≤ –∏ –∞–¥–º–∏–Ω–æ–≤) -->
                    <div class="leads-section" id="leadsSection" style="display: none;">
                        <div class="section-header">
                            <h2>–õ–∏–¥—ã</h2>
                            <button id="addLeadBtn" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –ª–∏–¥–∞</button>
                        </div>

                        <!-- –§–∏–ª—å—Ç—Ä—ã -->
                        <div class="filters">
                            <select id="statusFilter">
                                <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                                <option value="new">–ù–æ–≤—ã–µ</option>
                                <option value="in_work">–í —Ä–∞–±–æ—Ç–µ</option>
                                <option value="success">–£—Å–ø–µ—à–Ω—ã–µ</option>
                                <option value="fail">–ù–µ—É–¥–∞—á–Ω—ã–µ</option>
                            </select>
                            <button id="refreshBtn" class="btn btn-secondary">–û–±–Ω–æ–≤–∏—Ç—å</button>
                        </div>

                        <!-- –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–æ–≤ -->
                        <div class="table-container">
                            <table class="leads-table" id="leadsTable">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>–ò–º—è</th>
                                        <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                        <th>–°—Ç–∞—Ç—É—Å</th>
                                        <th>–ù–∞–∑–Ω–∞—á–µ–Ω</th>
                                        <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
                                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                    </tr>
                                </thead>
                                <tbody id="leadsTableBody">
                                    <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- –ü–∞–Ω–µ–ª—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ -->
                    <div class="operator-panel" id="operatorPanel" style="display: none;">
                        <div class="call-section">
                            <div class="call-info">
                                <h3>–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</h3>
                                <p>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ó–≤–æ–Ω–∏—Ç—å" –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –ª–∏–¥–∞–º–∏</p>
                            </div>
                            
                            <div class="call-controls">
                                <button id="operatorCallBtn" class="btn btn-success call-btn" disabled>
                                    üìû –ó–≤–æ–Ω–∏—Ç—å
                                </button>
                                
                                <button id="cancelCallBtn" class="btn btn-danger call-btn" style="display: none;">
                                    ‚ùå –û—Ç–º–µ–Ω–∏—Ç—å
                                </button>
                                
                                <div class="auto-call-option">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="autoCallCheckbox">
                                        <span class="checkmark"></span>
                                        –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–≤–æ–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–µ–º—É –ª–∏–¥—É –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª–∏–¥–∞ -->
        <div id="leadModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalTitle">–î–æ–±–∞–≤–∏—Ç—å –ª–∏–¥–∞</h3>
                    <span class="close">&times;</span>
                </div>
                <form id="leadForm">
                    <input type="hidden" id="leadId">
                    <div class="form-group">
                        <label for="leadName">–ò–º—è:</label>
                        <input type="text" id="leadName" required>
                    </div>
                    <div class="form-group">
                        <label for="leadPhone">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                        <input type="tel" id="leadPhone" required>
                    </div>
                    <div class="form-group">
                        <label for="leadStatus">–°—Ç–∞—Ç—É—Å:</label>
                        <select id="leadStatus">
                            <option value="new">–ù–æ–≤—ã–π</option>
                            <option value="in_work">–í —Ä–∞–±–æ—Ç–µ</option>
                            <option value="success">–£—Å–ø–µ—à–Ω—ã–π</option>
                            <option value="fail">–ù–µ—É–¥–∞—á–Ω—ã–π</option>
                        </select>
                    </div>
                    <div class="form-group" id="assignedToGroup" style="display: none;">
                        <label for="leadAssignedTo">–ù–∞–∑–Ω–∞—á–∏—Ç—å:</label>
                        <select id="leadAssignedTo">
                            <!-- –û–ø—Ü–∏–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="leadComment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
                        <textarea id="leadComment" rows="3"></textarea>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="cancelBtn">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–∏–¥–∞ –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ -->
        <div id="leadProcessModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>–û–±—Ä–∞–±–æ—Ç–∫–∞ –ª–∏–¥–∞</h3>
                    <span class="close" id="closeProcessModal">&times;</span>
                </div>
                <div class="lead-info">
                    <div class="lead-details">
                        <h4 id="processLeadName">-</h4>
                        <p id="processLeadPhone">-</p>
                        <p id="processLeadCreated">-</p>
                    </div>
                    <div class="lead-actions">
                        <button id="successBtn" class="btn btn-success">‚úÖ –£—Å–ø–µ—à–Ω–æ</button>
                        <button id="failBtn" class="btn btn-danger">‚ùå –ù–µ—É–¥–∞—á–Ω–æ</button>
                        <button id="skipBtn" class="btn btn-warning">‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        <div id="notifications" class="notifications"></div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
